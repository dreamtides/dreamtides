Benchmark session started at 2025-08-15T11:03:26.378343

$ docker version
Client:
 Cloud integration: v1.0.29
 Version:           20.10.21
 API version:       1.41
 Go version:        go1.18.7
 Git commit:        baeda1f
 Built:             Tue Oct 25 18:01:18 2022
 OS/Arch:           darwin/arm64
 Context:           desktop-linux
 Experimental:      true

Server: Docker Desktop 4.14.0 (91374)
 Engine:
  Version:          20.10.21
  API version:      1.41 (minimum version 1.12)
  Go version:       go1.18.7
  Git commit:       3056208
  Built:            Tue Oct 25 17:59:41 2022
  OS/Arch:          linux/arm64
  Experimental:     false
 containerd:
  Version:          1.6.9
  GitCommit:        1c90a442489720eec95342e1789ee8a5e1b9536f
 runc:
  Version:          1.1.4
  GitCommit:        v1.1.4-0-g5fd4c4d
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0

$ docker volume ls -q --filter name=^dreamtides_code$
dreamtides_code

$ docker volume ls -q --filter name=^dreamtides_target$
dreamtides_target

$ docker volume ls -q --filter name=^dreamtides_cargo$
dreamtides_cargo

$ docker images -q dreamtides-bench:ubuntu24
6ee345c67dab

$ docker ps -a --filter name=^dreamtides-bench$ --format {{.Status}}
Up 4 minutes

$ docker rm -f dreamtides-bench
dreamtides-bench

$ docker run -d --privileged --name dreamtides-bench -e CARGO_TARGET_DIR=/cache/target -v dreamtides_code:/workspace -v dreamtides_target:/cache/target -v dreamtides_cargo:/usr/local/cargo dreamtides-bench:ubuntu24
b06fee1dcfca398494689981bf2e330222ebde06ad05b4ca98abdeb7f75e5174

$ docker exec -u root dreamtides-bench bash -lc mkdir -p /cache/target && chown -R runner:runner /workspace /cache /usr/local/cargo || true

$ docker exec -u root dreamtides-bench bash -lc if ! command -v valgrind >/dev/null 2>&1; then apt-get update && apt-get install -y valgrind && rm -rf /var/lib/apt/lists/*; fi
Get:1 http://ports.ubuntu.com/ubuntu-ports noble InRelease [256 kB]
Get:2 http://ports.ubuntu.com/ubuntu-ports noble-updates InRelease [126 kB]
Get:3 http://ports.ubuntu.com/ubuntu-ports noble-backports InRelease [126 kB]
Get:4 http://ports.ubuntu.com/ubuntu-ports noble-security InRelease [126 kB]
Get:5 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 Packages [1776 kB]
Get:6 http://ports.ubuntu.com/ubuntu-ports noble/multiverse arm64 Packages [274 kB]
Get:7 http://ports.ubuntu.com/ubuntu-ports noble/universe arm64 Packages [19.0 MB]
Get:8 http://ports.ubuntu.com/ubuntu-ports noble/restricted arm64 Packages [113 kB]
Get:9 http://ports.ubuntu.com/ubuntu-ports noble-updates/restricted arm64 Packages [2757 kB]
Get:10 http://ports.ubuntu.com/ubuntu-ports noble-updates/universe arm64 Packages [1423 kB]
Get:11 http://ports.ubuntu.com/ubuntu-ports noble-updates/multiverse arm64 Packages [39.2 kB]
Get:12 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 Packages [1725 kB]
Get:13 http://ports.ubuntu.com/ubuntu-ports noble-backports/universe arm64 Packages [35.6 kB]
Get:14 http://ports.ubuntu.com/ubuntu-ports noble-backports/main arm64 Packages [48.8 kB]
Get:15 http://ports.ubuntu.com/ubuntu-ports noble-security/universe arm64 Packages [1104 kB]
Get:16 http://ports.ubuntu.com/ubuntu-ports noble-security/main arm64 Packages [1383 kB]
Get:17 http://ports.ubuntu.com/ubuntu-ports noble-security/restricted arm64 Packages [2587 kB]
Get:18 http://ports.ubuntu.com/ubuntu-ports noble-security/multiverse arm64 Packages [20.2 kB]
Fetched 32.9 MB in 3s (9664 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  gdb libbabeltrace1 libc6-dbg libdebuginfod-common libdebuginfod1t64
  libdw1t64 libelf1t64 libglib2.0-0t64 libglib2.0-data libicu74
  libpython3.12-minimal libpython3.12-stdlib libpython3.12t64
  libsource-highlight-common libsource-highlight4t64 libxml2 media-types
  shared-mime-info tzdata ucf xdg-user-dirs
Suggested packages:
  gdb-doc gdbserver low-memory-monitor valgrind-dbg valgrind-mpi kcachegrind
  alleyoop valkyrie
The following NEW packages will be installed:
  gdb libbabeltrace1 libc6-dbg libdebuginfod-common libdebuginfod1t64
  libdw1t64 libelf1t64 libglib2.0-0t64 libglib2.0-data libicu74
  libpython3.12-minimal libpython3.12-stdlib libpython3.12t64
  libsource-highlight-common libsource-highlight4t64 libxml2 media-types
  shared-mime-info tzdata ucf valgrind xdg-user-dirs
0 upgraded, 22 newly installed, 0 to remove and 1 not upgraded.
Need to get 40.3 MB of archives.
After this operation, 151 MB of additional disk space will be used.
Get:1 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 ucf all 3.0043+nmu1 [56.5 kB]
Get:2 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libdebuginfod-common all 0.190-1.1ubuntu0.1 [14.6 kB]
Get:3 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libelf1t64 arm64 0.190-1.1ubuntu0.1 [58.4 kB]
Get:4 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libglib2.0-0t64 arm64 2.80.0-6ubuntu3.4 [1531 kB]
Get:5 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libglib2.0-data all 2.80.0-6ubuntu3.4 [48.7 kB]
Get:6 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libicu74 arm64 74.2-1ubuntu3.1 [10.8 MB]
Get:7 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libpython3.12-minimal arm64 3.12.3-1ubuntu0.7 [832 kB]
Get:8 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 media-types all 10.1.0 [27.5 kB]
Get:9 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 tzdata all 2025b-0ubuntu0.24.04.1 [276 kB]
Get:10 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libpython3.12-stdlib arm64 3.12.3-1ubuntu0.7 [2037 kB]
Get:11 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libxml2 arm64 2.9.14+dfsg-1.3ubuntu3.3 [735 kB]
Get:12 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 shared-mime-info arm64 2.4-4 [472 kB]
Get:13 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 xdg-user-dirs arm64 0.18-1build1 [18.4 kB]
Get:14 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libdw1t64 arm64 0.190-1.1ubuntu0.1 [258 kB]
Get:15 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 libbabeltrace1 arm64 1.5.11-3build3 [159 kB]
Get:16 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libdebuginfod1t64 arm64 0.190-1.1ubuntu0.1 [16.2 kB]
Get:17 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libpython3.12t64 arm64 3.12.3-1ubuntu0.7 [2283 kB]
Get:18 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 libsource-highlight-common all 3.1.9-4.3build1 [64.2 kB]
Get:19 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 libsource-highlight4t64 arm64 3.1.9-4.3build1 [243 kB]
Get:20 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 gdb arm64 15.0.50.20240403-0ubuntu1 [4837 kB]
Get:21 http://ports.ubuntu.com/ubuntu-ports noble-updates/main arm64 libc6-dbg arm64 2.39-0ubuntu8.5 [6274 kB]
Get:22 http://ports.ubuntu.com/ubuntu-ports noble/main arm64 valgrind arm64 1:3.22.0-0ubuntu3 [9299 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 40.3 MB in 3s (14.6 MB/s)
Selecting previously unselected package ucf.
(Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 15961 files and directories currently installed.)
Preparing to unpack .../00-ucf_3.0043+nmu1_all.deb ...
Moving old data out of the way
Unpacking ucf (3.0043+nmu1) ...
Selecting previously unselected package libdebuginfod-common.
Preparing to unpack .../01-libdebuginfod-common_0.190-1.1ubuntu0.1_all.deb ...
Unpacking libdebuginfod-common (0.190-1.1ubuntu0.1) ...
Selecting previously unselected package libelf1t64:arm64.
Preparing to unpack .../02-libelf1t64_0.190-1.1ubuntu0.1_arm64.deb ...
Unpacking libelf1t64:arm64 (0.190-1.1ubuntu0.1) ...
Selecting previously unselected package libglib2.0-0t64:arm64.
Preparing to unpack .../03-libglib2.0-0t64_2.80.0-6ubuntu3.4_arm64.deb ...
Unpacking libglib2.0-0t64:arm64 (2.80.0-6ubuntu3.4) ...
Selecting previously unselected package libglib2.0-data.
Preparing to unpack .../04-libglib2.0-data_2.80.0-6ubuntu3.4_all.deb ...
Unpacking libglib2.0-data (2.80.0-6ubuntu3.4) ...
Selecting previously unselected package libicu74:arm64.
Preparing to unpack .../05-libicu74_74.2-1ubuntu3.1_arm64.deb ...
Unpacking libicu74:arm64 (74.2-1ubuntu3.1) ...
Selecting previously unselected package libpython3.12-minimal:arm64.
Preparing to unpack .../06-libpython3.12-minimal_3.12.3-1ubuntu0.7_arm64.deb ...
Unpacking libpython3.12-minimal:arm64 (3.12.3-1ubuntu0.7) ...
Selecting previously unselected package media-types.
Preparing to unpack .../07-media-types_10.1.0_all.deb ...
Unpacking media-types (10.1.0) ...
Selecting previously unselected package tzdata.
Preparing to unpack .../08-tzdata_2025b-0ubuntu0.24.04.1_all.deb ...
Unpacking tzdata (2025b-0ubuntu0.24.04.1) ...
Selecting previously unselected package libpython3.12-stdlib:arm64.
Preparing to unpack .../09-libpython3.12-stdlib_3.12.3-1ubuntu0.7_arm64.deb ...
Unpacking libpython3.12-stdlib:arm64 (3.12.3-1ubuntu0.7) ...
Selecting previously unselected package libxml2:arm64.
Preparing to unpack .../10-libxml2_2.9.14+dfsg-1.3ubuntu3.3_arm64.deb ...
Unpacking libxml2:arm64 (2.9.14+dfsg-1.3ubuntu3.3) ...
Selecting previously unselected package shared-mime-info.
Preparing to unpack .../11-shared-mime-info_2.4-4_arm64.deb ...
Unpacking shared-mime-info (2.4-4) ...
Selecting previously unselected package xdg-user-dirs.
Preparing to unpack .../12-xdg-user-dirs_0.18-1build1_arm64.deb ...
Unpacking xdg-user-dirs (0.18-1build1) ...
Selecting previously unselected package libdw1t64:arm64.
Preparing to unpack .../13-libdw1t64_0.190-1.1ubuntu0.1_arm64.deb ...
Unpacking libdw1t64:arm64 (0.190-1.1ubuntu0.1) ...
Selecting previously unselected package libbabeltrace1:arm64.
Preparing to unpack .../14-libbabeltrace1_1.5.11-3build3_arm64.deb ...
Unpacking libbabeltrace1:arm64 (1.5.11-3build3) ...
Selecting previously unselected package libdebuginfod1t64:arm64.
Preparing to unpack .../15-libdebuginfod1t64_0.190-1.1ubuntu0.1_arm64.deb ...
Unpacking libdebuginfod1t64:arm64 (0.190-1.1ubuntu0.1) ...
Selecting previously unselected package libpython3.12t64:arm64.
Preparing to unpack .../16-libpython3.12t64_3.12.3-1ubuntu0.7_arm64.deb ...
Unpacking libpython3.12t64:arm64 (3.12.3-1ubuntu0.7) ...
Selecting previously unselected package libsource-highlight-common.
Preparing to unpack .../17-libsource-highlight-common_3.1.9-4.3build1_all.deb ...
Unpacking libsource-highlight-common (3.1.9-4.3build1) ...
Selecting previously unselected package libsource-highlight4t64:arm64.
Preparing to unpack .../18-libsource-highlight4t64_3.1.9-4.3build1_arm64.deb ...
Unpacking libsource-highlight4t64:arm64 (3.1.9-4.3build1) ...
Selecting previously unselected package gdb.
Preparing to unpack .../19-gdb_15.0.50.20240403-0ubuntu1_arm64.deb ...
Unpacking gdb (15.0.50.20240403-0ubuntu1) ...
Selecting previously unselected package libc6-dbg:arm64.
Preparing to unpack .../20-libc6-dbg_2.39-0ubuntu8.5_arm64.deb ...
Unpacking libc6-dbg:arm64 (2.39-0ubuntu8.5) ...
Selecting previously unselected package valgrind.
Preparing to unpack .../21-valgrind_1%3a3.22.0-0ubuntu3_arm64.deb ...
Unpacking valgrind (1:3.22.0-0ubuntu3) ...
Setting up media-types (10.1.0) ...
Setting up xdg-user-dirs (0.18-1build1) ...
Setting up libpython3.12-minimal:arm64 (3.12.3-1ubuntu0.7) ...
Setting up libsource-highlight-common (3.1.9-4.3build1) ...
Setting up libelf1t64:arm64 (0.190-1.1ubuntu0.1) ...
Setting up libc6-dbg:arm64 (2.39-0ubuntu8.5) ...
Setting up libdw1t64:arm64 (0.190-1.1ubuntu0.1) ...
Setting up tzdata (2025b-0ubuntu0.24.04.1) ...

Current default time zone: 'Etc/UTC'
Local time is now:      Fri Aug 15 18:03:38 UTC 2025.
Universal Time is now:  Fri Aug 15 18:03:38 UTC 2025.
Run 'dpkg-reconfigure tzdata' if you wish to change it.

Setting up libglib2.0-0t64:arm64 (2.80.0-6ubuntu3.4) ...
No schema files found: doing nothing.
Setting up libglib2.0-data (2.80.0-6ubuntu3.4) ...
Setting up ucf (3.0043+nmu1) ...
Setting up libbabeltrace1:arm64 (1.5.11-3build3) ...
Setting up libicu74:arm64 (74.2-1ubuntu3.1) ...
Setting up valgrind (1:3.22.0-0ubuntu3) ...
Setting up libxml2:arm64 (2.9.14+dfsg-1.3ubuntu3.3) ...
Setting up libpython3.12-stdlib:arm64 (3.12.3-1ubuntu0.7) ...
Setting up libdebuginfod-common (0.190-1.1ubuntu0.1) ...
Setting up libsource-highlight4t64:arm64 (3.1.9-4.3build1) ...
Setting up libpython3.12t64:arm64 (3.12.3-1ubuntu0.7) ...
Setting up shared-mime-info (2.4-4) ...
Setting up libdebuginfod1t64:arm64 (0.190-1.1ubuntu0.1) ...
Setting up gdb (15.0.50.20240403-0ubuntu1) ...
Processing triggers for libc-bin (2.39-0ubuntu8.5) ...

$ docker exec -u runner dreamtides-bench bash -lc if ! command -v iai-callgrind-runner >/dev/null 2>&1; then cargo install --locked --version 0.16.1 iai-callgrind-runner; fi

$ docker run --rm -v dreamtides_code:/workspace -v /Users/dthurn/Documents/GoogleDrive/dreamtides/rules_engine:/host_project:ro dreamtides-bench:ubuntu24 bash -lc rsync -az --delete --exclude .git/ --exclude target/ --exclude '**/target/' --exclude .cargo/ --exclude '**/.git/' --exclude '**/.DS_Store' --exclude '**/.idea/' --exclude '**/.vscode/' --exclude '**/node_modules/' /host_project/ /workspace/

$ docker exec -u runner dreamtides-bench bash -lc cd /workspace && cargo build
warning: hiding a lifetime that's elided elsewhere is confusing
   --> src/battle_queries/src/battle_card_queries/card_abilities.rs:238:34
    |
238 | fn event_effect_predicates(list: &AbilityList) -> Vec<EventEffectPredicate> {
    |                                  ^^^^^^^^^^^^         -------------------- the same lifetime is hidden here
    |                                  |
    |                                  the lifetime is elided here
    |
    = help: the same lifetime is referred to in inconsistent ways, making the signature confusing
    = note: `#[warn(mismatched_lifetime_syntaxes)]` on by default
help: use `'_` for type paths
    |
238 | fn event_effect_predicates(list: &AbilityList) -> Vec<EventEffectPredicate<'_>> {
    |                                                                           ++++

warning: `battle_queries` (lib) generated 1 warning
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.16s

$ docker exec -u runner dreamtides-bench bash -lc cd /workspace && cargo bench -- iai_benchmarks
warning: hiding a lifetime that's elided elsewhere is confusing
   --> src/battle_queries/src/battle_card_queries/card_abilities.rs:238:34
    |
238 | fn event_effect_predicates(list: &AbilityList) -> Vec<EventEffectPredicate> {
    |                                  ^^^^^^^^^^^^         -------------------- the same lifetime is hidden here
    |                                  |
    |                                  the lifetime is elided here
    |
    = help: the same lifetime is referred to in inconsistent ways, making the signature confusing
    = note: `#[warn(mismatched_lifetime_syntaxes)]` on by default
help: use `'_` for type paths
    |
238 | fn event_effect_predicates(list: &AbilityList) -> Vec<EventEffectPredicate<'_>> {
    |                                                                           ++++

warning: `battle_queries` (lib) generated 1 warning
    Finished `bench` profile [optimized] target(s) in 0.16s
     Running unittests src/lib.rs (/cache/target/release/deps/ai_uct-6d77032d7c80e807)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (/cache/target/release/deps/battle_benchmarks-cc136cd322066ddf)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running benches/battle_benchmarks.rs (/cache/target/release/deps/battle_benchmarks-03fac4491624c5fe)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running benches/iai_benchmarks.rs (/cache/target/release/deps/iai_benchmarks-573ca86065d2f458)
iai_benchmarks::bench_group::bench_core11_evaluate eval:benchmark_battles :: core_11_battle :: generate_co...
  Instructions:                      416352|416352               (No change)
  L1 Hits:                           620407|620407               (No change)
  LL Hits:                             6380|6380                 (No change)
  RAM Hits:                             999|999                  (No change)
  Total read+write:                  627786|627786               (No change)
  Estimated Cycles:                  687272|687272               (No change)

Iai-Callgrind result: Ok. 1 without regressions; 0 regressed; 1 benchmarks finished in 0.33952s
     Running benches/playout_benchmarks.rs (/cache/target/release/deps/playout_benchmarks-0fa8ac3f707a1413)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/bin/test_determinism.rs (/cache/target/release/deps/test_determinism-9604ddb0deb8b7a8)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/bin/test_payload_size.rs (/cache/target/release/deps/test_payload_size-7f605c33784082d9)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/lib.rs (/cache/target/release/deps/benchmark_battles-f655bdad2286e6e8)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/core_11_battle.rs (/cache/target/release/deps/core_11_battle-9bb9a89bd86bee4a)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running benches/file_parsing_benchmarks.rs (/cache/target/release/deps/file_parsing_benchmarks-b1c712712bb16a95)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running benches/parser_benchmarks.rs (/cache/target/release/deps/parser_benchmarks-b2e6bd245bf1b3be)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/plugin.rs (/cache/target/release/deps/plugin-1dabf148bd669fb2)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running unittests src/run_matchup.rs (/cache/target/release/deps/run_matchup-9b1af8a27e090c45)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

